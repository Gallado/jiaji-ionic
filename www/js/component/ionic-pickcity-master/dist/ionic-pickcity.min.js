angular.module("bing.ionic.pickcity",["ionic"]),function(e,t){"use strict";e.module("bing.ionic.pickcity").directive("ionicPickCity",["$rootScope","$ionicModal","$timeout","CityPickerService","$ionicScrollDelegate",function(e,i,o,m,n){return{restrict:"E",scope:{options:"=options"},template:'<div class="{{::vm.cssClass}}"><a class="item {{::vm.iconPosition}}" href="#" ng-click="vm.showModal($event)"><i class="icon {{::vm.iconClass}}"></i>{{::vm.title}}<span class="item-note" ng-bind="vm.items"></span></a><div>',link:function(a,s,c){var l=a.vm={},r=a.options;l.cssClass="ionic-citypicker list",l.iconPosition=r.iconPosition||"item-icon-left",l.iconClass=r.iconClass||"ion-android-pin",l.title=r.title||"地址",l.closeText=r.closeText||"取消",l.buttonText=r.buttonText||"确定",l.areaTitle=r.areaTitle||"所在区域",l.backdrop=r.backdrop===t||!!Boolean(r.backdrop),l.isCache=r.isCache===t||!!Boolean(r.isCache),l.areaData1=m,l.itemTab1=!0,l.itemTab2=!1,l.itemTab3=!1,l.showItem1=!0,l.showItem2=!1,l.showItem3=!1,l.itemText1="请选择",l.itemText2="请选择",l.itemText3="请选择",l.item1=null,l.item2=null,l.item3=null,l.isHasChild=!0,i.fromTemplateUrl("/js/pickcity/src/template/ionic.citypicker.html",{scope:a,animation:"slide-in-up"}).then(function(e){a.modal=e});var u=function(){n.$getByHandle("item-area-select-modal").scrollTop()};l.showModal=function(e){e.preventDefault(),a.modal.isShown()||a.modal.show()},l.returnCancel=function(){o(function(){a.modal.hide()},100)},l.returnOk=function(){return!l.isHasChild&&(l.item1&&l.item2&&l.item3&&(l.items=l.item1+"-"+l.item2+"-"+l.item3),l.item1&&l.item2&&!l.item3&&(l.items=l.item1+"-"+l.item2),l.item1&&!l.item2&&(l.items=l.item1),void l.returnCancel())},l.clickToClose=function(){l.returnCancel()},l.select1=function(e){return u(),e.sub===t?(l.itemText1=e.name,l.itemTab1=!0,l.itemTab2=!0,l.itemTab3=!1,l.isHasChild=!1,!1):(l.itemText1=e.name,l.areaData2=e.sub,l.item1=e.name,l.itemTab1=!0,l.itemTab2=!0,l.itemTab3=!1,l.showItem1=!1,l.showItem2=!0,l.showItem3=!1,l.itemText2="请选择",void 0)},l.select2=function(e){return u(),e.sub===t?(l.itemText2=e.name,l.item2=e.name,l.itemTab1=!0,l.itemTab2=!0,l.itemTab3=!1,l.isHasChild=!1,!1):(l.itemText2=e.name,l.areaData3=e.sub,l.item2=e.name,l.itemTab1=!0,l.itemTab2=!0,l.itemTab3=!0,l.showItem1=!1,l.showItem2=!1,l.showItem3=!0,l.itemText3="请选择",void 0)},l.select3=function(e){return u(),e.sub===t?(l.itemText3=e.name,l.item3=e.name,l.isHasChild=!1,!1):(l.itemText2=e.name,l.areaData3=e.sub,l.item3=e.name,l.itemTab1=!0,l.itemTab2=!0,l.itemTab3=!0,l.showItem1=!1,l.showItem2=!1,l.showItem3=!0,void 0)},l.tab1=function(){u(),l.showItem1=!0,l.showItem2=!1,l.showItem3=!1,l.item2=null,l.item3=null,l.isHasChild=!0},l.tab2=function(){u(),l.showItem1=!1,l.showItem2=!0,l.showItem3=!1,l.item3=null,l.isHasChild=!0},l.tab3=function(){u(),l.showItem1=!1,l.showItem2=!1,l.showItem3=!0},l.isCache||(a.$on("$destroy",function(){a=l=null}),e.$on("$stateChangeSuccess",function(){a.$destroy(),a.modal.remove()}))}}}])}(angular);